# XXX + slp
[tox]
envlist = {py27,py35,py36,py37,pypy,pypy3}-{thread,gevent}

[testenv]
deps    =
    # why tox does not get it from extras_require['test'] ?
    pytest

# gpython pre-imports installed golang, will get into conflict with
# golang/ if we run pytest from pygolang worktree. Avoid that.
changedir = {envsitepackagesdir}

# --jit off
commands=
    thread: {envpython} -m pytest -vsx -k test_bytepatch golang/
    gevent: gpython     -m pytest gpython/ golang/
